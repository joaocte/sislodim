<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/templates/generico.xhtml">
	<ui:define name="conteudo">


		<h:panelGrid columns="2" width="520">

			<h:form>
				<h:panelGrid columns="3">
					<h:outputText value="Pesquisar" />
					<h:inputText id="nome" value="#{atualBean.termoPesquisa}"
						required="true" />
					<a4j:commandButton value="Encontrar"
						action="#{atualBean.pesquisar}" reRender="generica,datascroller" />
				</h:panelGrid>
				<a4j:status>
					<f:facet name="start">
						<h:graphicImage value="/images/indicator.gif" />
					</f:facet>
				</a4j:status>
			</h:form>
			<h:form>
				<h:panelGrid columns="1">
					<ui:insert name="linkNovoItem"></ui:insert>
				</h:panelGrid>
			</h:form>
		</h:panelGrid>

		<a4j:form>
						
		<rich:panel>
			<h:panelGrid class="lista" columns="1" width="520">

				<rich:dataTable
					onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
					onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
					cellpadding="0" cellspacing="0" width="518" border="0" rows="10"
					var="elementoDaVez" value="#{atualBean.listaTudo}" id="generica">

					<f:facet name="header">
						<rich:columnGroup>
						<ui:insert name="tituloTabela"/>
							<rich:column rowspan="2" colspan="2" rendered="#{sessaoBean.coordenador or sessaoBean.moderador}">
								<h:outputText value="Ações" />
							</rich:column>

							<rich:column breakBefore="true">
								<ui:insert name="campo1"></ui:insert>
							</rich:column>

							<rich:column>
								<ui:insert name="campo2"></ui:insert>
							</rich:column>
							<ui:insert name="colunasAdicionaisTitulos" />
						</rich:columnGroup>
					</f:facet>
					<rich:columnGroup>
						<rich:column breakBefore="true">
							<ui:insert name="campo11" id="campo11"></ui:insert>
						</rich:column>

						<rich:column>
							<ui:insert name="campo21" id="campo21"></ui:insert>
						</rich:column>
						<ui:insert name="colunasAdicionaisValores" />
						<rich:column rendered="#{sessaoBean.coordenador or sessaoBean.moderador}">
							<a4j:commandButton value="Editar"
								oncomplete="#{rich:component('editPanel')}.show()"
								ajaxSingle="true" >
								<f:setPropertyActionListener value="#{elementoDaVez}"
									target="#{atualBean.elementoSelecionado}" />
							</a4j:commandButton>
						</rich:column>

						<rich:column rendered="#{sessaoBean.coordenador or sessaoBean.moderador}">
							<a4j:commandButton value="Deletar" ajaxSingle="true" id="deletelink"
                    oncomplete="#{rich:component('deletePanel')}.show()">
                    <f:setPropertyActionListener value="#{elementoDaVez}"
                        target="#{atualBean.elementoSelecionado}" />
                </a4j:commandButton>
							
							
						</rich:column>
					</rich:columnGroup>
				</rich:dataTable>
				<rich:datascroller align="left" for="generica" id="datascroller" />

				<rich:spacer height="30" />

			</h:panelGrid>
			</rich:panel>
		</a4j:form>
		<rich:modalPanel id="editPanel" autosized="true" width="450">
			<f:facet name="header">
				<ui:insert name="tituloEdit">
					<h:outputText value="O que você quer editar?" />
				</ui:insert>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="/images/modal/close.png" id="hidelink"
						styleClass="hidelink" />
					<rich:componentControl for="editPanel" attachTo="hidelink"
						operation="hide" event="onclick" />
				</h:panelGroup>
			</f:facet>
			<h:form>
				<rich:messages style="color:red;"></rich:messages>
				<h:panelGrid columns="1">
					<a4j:outputPanel ajaxRendered="true">
						<h:panelGrid columns="2">
							<ui:insert name="camposEdit"></ui:insert>
						</h:panelGrid>
					</a4j:outputPanel>

					<h:panelGrid columns="2">

						<a4j:commandButton value="Editar" action="#{atualBean.update}"
							oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('editPanel')}.hide();"
							reRender="generica, datascroller" />

						<a4j:commandButton value="Cancelar"
							onclick="#{rich:component('editPanel')}.hide(); return false;" />

					</h:panelGrid>

				</h:panelGrid>
			</h:form>
		</rich:modalPanel>
		<rich:modalPanel id="deletePanel" autosized="true" width="200">
        <f:facet name="header">
        <ui:insert name="tituloDel">
            <h:outputText value="Tem certeza que deseja deletar?"/>
                </ui:insert>
        </f:facet>
        <f:facet name="controls">
            <h:panelGroup>
                <rich:componentControl for="deletePanel" attachTo="hidelink2"
                    operation="hide" event="onclick" />
            </h:panelGroup>
        </f:facet>
        <h:form>
            <table width="100%">
                <tbody>
                    <tr>
                        <td align="center" width="50%">
                <a4j:commandButton value="Deletar" ajaxSingle="true"
                    action="#{atualBean.delete}"
                    oncomplete="#{rich:component('deletePanel')}.hide();"
                    reRender="generica, datascroller" />
                        </td>
                        <td align="center" width="50%">
                <a4j:commandButton value="Cancelar"
                    onclick="#{rich:component('deletePanel')}.hide();return false;" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </h:form>
    </rich:modalPanel>
	</ui:define>
</ui:composition>

</html>
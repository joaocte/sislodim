<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/templates/generico.xhtml">
	<ui:define name="conteudo">
		<ui:insert name="filtroBusca"></ui:insert>
		<h:form>
			<a4j:region>
				<h:panelGrid class="lista" columns="1" width="520">

					<rich:dataTable
						onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
						onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
						cellpadding="0" cellspacing="0" width="518" border="0"
						var="elementoDaVez" value="#{atualBean.listaTudo}" id="generica">

						<f:facet name="header">
							<rich:columnGroup>
								<rich:column colspan="3">
									<ui:insert name="tituloTabela"></ui:insert>
								</rich:column>
								
								<rich:column rowspan="2" colspan="2">
									<h:outputText value="Ações" />
								</rich:column>

								<rich:column breakBefore="true">
									<ui:insert name="campo1"></ui:insert>
								</rich:column>
								
								<rich:column>
									<ui:insert name="campo2"></ui:insert>
								</rich:column>
								
								<rich:column>
									<ui:insert name="campo3"></ui:insert>
								</rich:column>								
							</rich:columnGroup>
						</f:facet>
						<rich:columnGroup>
							<rich:column breakBefore="true">
								<ui:insert name="campo11" id="campo11"></ui:insert>
							</rich:column>
							
							<rich:column>
								<ui:insert name="campo21" id="campo21"></ui:insert>
							</rich:column>
							
							<rich:column>
								<ui:insert name="campo31" id="campo31"></ui:insert>
							</rich:column>
							
							<rich:column>
								<a4j:commandButton value="Editar"
									oncomplete="#{rich:component('editPanel')}.show()"
									ajaxSingle="true" reRender="generica">
									<f:setPropertyActionListener value="#{elementoDaVez}"
										target="#{atualBean.elementoSelecionado}" />
								</a4j:commandButton>
							</rich:column>

							<rich:column>
								<h:commandButton value="Apagar" action="#{atualBean.delete}"
									immediate="true"
									onclick="return confirm('Deseja mesmo deletar este item?');">
									<f:setPropertyActionListener value="#{elementoDaVez}"
										target="#{atualBean.elementoSelecionado}" />

								</h:commandButton>
							</rich:column>
						</rich:columnGroup>
					</rich:dataTable>
					
					<rich:datascroller align="left" for="generica" maxPages="10" />
					<rich:spacer height="30" />

				</h:panelGrid>
			</a4j:region>
		</h:form>
		<rich:modalPanel id="editPanel" autosized="true" width="450">
			<f:facet name="header">
				<ui:insert name="tituloEdit">
					<h:outputText value="O que você quer editar?" />
				</ui:insert>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="/images/modal/close.png" id="hidelink"
						styleClass="hidelink" />
					<rich:componentControl for="editPanel" attachTo="hidelink"
						operation="hide" event="onclick" />
				</h:panelGroup>
			</f:facet>
			<h:form>
				<rich:messages style="color:red;"></rich:messages>
				<h:panelGrid columns="1">
					<a4j:outputPanel ajaxRendered="true">
						<h:panelGrid columns="2">
							<ui:insert name="camposEdit"></ui:insert>
						</h:panelGrid>
					</a4j:outputPanel>
					
					<h:panelGrid columns="2">
					
					<a4j:commandButton value="Editar" action="#{atualBean.update}"
						oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('editPanel')}.hide();" reRender="generica"/>						
					
					<a4j:commandButton value="Cancelar" onclick="#{rich:component('editPanel')}.hide(); return false;" />
					
					</h:panelGrid>
					
				</h:panelGrid>
			</h:form>
		</rich:modalPanel>
	</ui:define>
</ui:composition>

</html>